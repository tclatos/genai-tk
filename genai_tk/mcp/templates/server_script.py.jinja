#!/usr/bin/env python
"""Standalone MCP server script for '{{ server_name }}'.

Auto-generated by genai-tk on {{ generated_at }}.
Do NOT edit manually — re-generate with:
    uv run cli mcp generate --name {{ server_name }} --output <file>

Launch:
    uv run {{ script_filename }}
    # or add to [project.scripts] in pyproject.toml:
    #   mcp-{{ server_name|lower|replace(' ', '-') }} = "your_package.{{ module_name }}:main"
"""

import sys
from pathlib import Path

# ── Ensure the project root is on the path when the script is run directly ──
_HERE = Path(__file__).resolve()
_PROJECT_ROOT = _HERE.parent
# Walk up looking for pyproject.toml to find actual project root
for _p in [_HERE, *_HERE.parents]:
    if (_p / "pyproject.toml").exists():
        _PROJECT_ROOT = _p
        break
if str(_PROJECT_ROOT) not in sys.path:
    sys.path.insert(0, str(_PROJECT_ROOT))

# ── Config path (resolved at generation time or auto-detected at runtime) ──
_CONFIG_PATH: str | None = {{ config_path_repr }}


def main() -> None:
    """Entry-point: build and serve the '{{ server_name }}' MCP server."""
    from genai_tk.mcp.server_builder import serve

    serve(
        name={{ server_name | tojson }},
        config_path=_CONFIG_PATH,
        transport="stdio",
    )


if __name__ == "__main__":
    main()
