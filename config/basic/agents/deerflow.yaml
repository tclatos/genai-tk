# Deer-flow Agent Configuration
# 
# Unified configuration for Deer-flow agents including profiles, skills, and sandbox settings.
#
# Profile Key Fields:
#   name:              Profile display name
#   description:       Profile description
#   mode:              Agent mode: flash (fast), thinking (reasoning), pro (planning), ultra (all features)
#   llm:               LLM identifier (ID like 'gpt_41mini@openai' or tag like 'fast_model'). Optional, defaults to global config.
#   tool_groups:       Deer-flow tool groups to enable (web, file:read, file:write, bash)
#   skill_directories: Directories to load skills from (loaded recursively)
#   mcp_servers:       MCP server names from config/mcp_servers.yaml
#   tools:             Additional GenAI Blueprint tools (factory/class/function patterns)
#   features:          Feature badges for UI display
#   examples:          Sample queries for the demo UI

# ============================================================================
# Global Configuration
# ============================================================================
deerflow:
  # Skills configuration
  skills:
    directories:
      - ${paths.project}/skills
    container_path: /mnt/skills
    trace_loading: true
  
  default_profile: &default_profile "Research Assistant"

  # ============================================================================
  # General deer-flow config settings (copied verbatim into generated config.yaml)
  # ============================================================================
  general:
    title:
      enabled: true
      max_words: 6
      max_chars: 60
      model_name: null

    summarization:
      enabled: true
      model_name: null
      trigger:
        - type: tokens
          value: 15564
      keep:
        type: messages
        value: 10
      trim_tokens_to_summarize: 15564
      summary_prompt: null

    memory:
      enabled: true
      storage_path: .deer-flow/memory.json
      debounce_seconds: 30
      model_name: null
      max_facts: 100
      fact_confidence_threshold: 0.7
      injection_enabled: true
      max_injection_tokens: 2000

# ============================================================================
# Agent Profiles
# ============================================================================
deerflow_agents:
  - name: "Research Assistant"
    description: "Web research with deep reasoning, visualizations, and skill execution"
    mode: "pro"  # thinking + plan mode
    #llm: "deepseek_v32@openrouter"  # Can use LLM ID or tag like 'fast_model'
    llm: gpt_oss120@openrouter
    sandbox: local
    tool_groups:
      - web
      - file
      - bash
    mcp_servers:
      - tavily-mcp
    skill_directories:
      - ${paths.project}/skills  # Load all skills recursively
    features:
      - "üåê Web Search"
      - "üìä Data Analysis"
      - "üìà Chart Generation"
      - "üß† Planning Mode"
    examples:
      - "Research the latest developments in quantum computing"
      - "Compare different approaches to RAG systems"
      - "Explain what MOE is to a 12-year-old boy"

  - name: "Web Browser"
    description: "Fast web browsing and content extraction"
    mode: "flash"  # quick responses
    sandbox: local
    tool_groups:
      - web
    mcp_servers:
      - playwright
    features:
      - "üåê Web Browsing"
      - "üìÑ Content Extraction"
      - "‚ö° Fast Mode"
    examples:
      - "Go to atos.net, find the blog section and list recent articles"
      - "Navigate to github.com/bytedance/deer-flow and summarize the project"

 
  - name: "Chinook DB + Research"
    description: "SQL database with web research"
    mode: "thinking"  # reasoning mode
    sandbox: local
    tool_groups:
      - web
    mcp_servers:
      - tavily-mcp
    tools:
      - factory: genai_tk.tools.langchain.sql_tool_factory:create_sql_tool_from_config
        config:
          database_uri: "sqlite:///use_case_data/other/Chinook.db"
          tool_name: "query_chinook"
          tool_description: "Query the Chinook music database for information about artists, albums, tracks, customers, and invoices"
          top_k: 15
    skill_directories:
      - ${paths.project}/skills  # Load all skills recursively
    features:
      - "üóÑÔ∏è SQL Database"
      - "üîç Web Search"
      - "üìä Data Visualization"
    examples:
      - "Find the top 5 genres by number of tracks, then research each genre's history"
